<div class="container-login">

  <div class="content">
    @if (menuSeleccion === 'login') {
    <h1>¡Accede ya!</h1>
    } @else {
    <h1>¡Registrate ya!</h1>
    }

    @if (menuSeleccion === 'login') {
    <div class="contenido login">
      <form (submit)="login()">
        <div>
          <input
            type="text"
            [maxLength]="30"
            placeholder="Email"
            class="icon-input"
            required
            [(ngModel)]="emailOrNickname"
            [ngModelOptions]="{ standalone: true }"
          />

          <input
            type="password"
            placeholder="Contraseña"
            class="icon-input"
            required
            [(ngModel)]="password"
            [ngModelOptions]="{ standalone: true }"
          />
          <br />
          <div class="checkbox-wrapper">
            <input
              type="checkbox"
              [(ngModel)]="rememberMe"
              [ngModelOptions]="{ standalone: true }"
              id="rememberMe"
              binary="true"
            />
            <label for="rememberMe" class="remember-me-label">
              Recuérdame
            </label>
          </div>
        </div>
        <br />
        <div>
          <button
            [disabled]="emailOrNickname.length < 1 || password.length < 1"
            type="submit"
            class="form-button"
          >
            Iniciar sesión
          </button>
        </div>
      </form>
    </div>
    <p class="change" (click)="menuSeleccion = 'register'">
      ¿No tienes cuenta? Regístrate
    </p>
    } @else {
    <div class="contenido registro">
      <form [formGroup]="registerForm" (submit)="register()">
        <input
          type="text"
          [maxlength]="16"
          placeholder="Nombre"
          formControlName="nickname"
        />

        <div class="error">
          <div
            *ngIf="
              registerForm.get('nickname')?.invalid &&
              registerForm.get('nickname')?.touched
            "
          >
            <div *ngIf="registerForm.get('nickname')?.hasError('required')">
              <span class="icon">!</span>
              El nombre es obligatorio
            </div>
          </div>
        </div>

        <input type="email" placeholder="Email" formControlName="email" />

        <div class="error">
          <div
            *ngIf="
              registerForm.get('email')?.invalid &&
              registerForm.get('email')?.touched
            "
          >
            <div *ngIf="registerForm.get('email')?.hasError('required')">
              <span class="icon">!</span>
               El mail es obligatorio
            </div>
            <div
              *ngIf="
                registerForm.get('email')?.hasError('email') ||
                registerForm.get('email')?.hasError('pattern')
              "
            >
              <span class="icon">!</span>
              Correo no válido
            </div>
          </div>
        </div>

        <input
          type="password"
          placeholder="Contraseña"
          formControlName="newPassword"
        />

        <div class="error">
          <div
            *ngIf="
              registerForm.get('newPassword')?.invalid &&
              registerForm.get('newPassword')?.touched
            "
          >
            <div *ngIf="registerForm.get('newPassword')?.hasError('required')">
              <span class="icon">!</span>La contraseña es obligatoria
            </div>
            <div *ngIf="registerForm.get('newPassword')?.hasError('minlength')">
              <span class="icon">!</span>La contraseña debe tener al menos 6 caracteres
            </div>
          </div>
        </div>

        <input
          type="password"
          placeholder="Confirmar contraseña"
          formControlName="confirmPassword"
        />

        <div class="error">
          <div
            *ngIf="
              registerForm.hasError('mismatch') &&
              registerForm.get('confirmPassword')?.touched
            "
          >
            <span class="icon">!</span>Las contraseñas no coinciden
          </div>
        </div>

        <button
          [disabled]="!registerForm.valid"
          type="submit"
          class="form-button"
        >
          Crear cuenta
        </button>
      </form>
    </div>
    <p class="change" (click)="menuSeleccion = 'login'">
      ¿Ya tienes cuenta? Inicia sesión
    </p>
    }
  </div>
</div>
